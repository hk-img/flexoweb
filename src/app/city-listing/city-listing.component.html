<div class="loader_circle">
  <span class="loader" *ngIf="isloader"></span>
</div>
<div [ngClass]="_showMap ? 'filter-wrapper style1 mar-top-100 half-map' : 'mt-70'">
  <div class="container-fluid position-relative city_google_drop" style="z-index: 99;">
    <div class="row">
      <div class="col-lg-8 col-md-12" [class.col-lg-12]="!_showMap">
        <filter-item class="min-heightclass" [isMobile]="isMobile" [city_name]="city_param" find_near_me="0" area_name="0" is_city="true"
          [filter]="filter" [nearByLocations]="nearBySpaces.asObservable()"
          (filterItemEvent)="openFiltersDialog($event)" (showMap)="showHideMap($event)">
        </filter-item>
        <div class="row pad-bot-10 align-items-center heightadjust">
          <div class="col-lg-12 col-sm-12 col-12">
            <div class="item-element res-box text-right xs-left" *ngIf="shimming">
              <div style="float: center">
                <app-shimmer-loading [borderRadius]="'5px'" [width]="'35%'" [height]="'30px'"></app-shimmer-loading>
              </div>
            </div>
            <div class="item-element res-box text-right xs-left" *ngIf="spaces_list.length">
              <p *ngIf="page_start !== page_end">
                Showing
                <span>{{ page_start }}-{{ page_end }} of {{ space_count }}</span>
                Listings
              </p>
              <p *ngIf="page_start == page_end">
                Showing
                <span>{{ page_start }} of {{ space_count }}</span> Listings
              </p>
            </div>
          </div>
        </div>
        <div class="item-wrapper mainheight" style="min-height: 480px;">
          <div class="tab-content flex-shimmer" *ngIf="shimming">
            <div>
              <app-shimmer-loading [borderRadius]="'5px'" [width]="'100%'" [height]="'480px'"></app-shimmer-loading>
            </div>
            <div>
              <app-shimmer-loading [borderRadius]="'5px'" [width]="'100%'" [height]="'480px'"></app-shimmer-loading>
            </div>
          </div>
          <div style="text-align: center;" *ngIf="!spaces_list.length && !recommended_spaces.length && !isloader">
            <!-- <img style="width: 10%;" src="../../https://flexospaces-images.s3.ap-south-1.amazonaws.com/img/not-found.webp" alt=""> -->
            <img loading="lazy" fetchpriority="low" style="width: 10%;"
              src="https://flexospaces-images.s3.ap-south-1.amazonaws.com/img/preloader.gif" alt="location"
              title="location" class="ratio-1x1 img-fluid" />
            <h3 style="font-size: 16px !important;color: #897777 !important;">Finding the best options for you. Stay
              tuned!</h3>
          </div>
          <div class="tab-content" *ngIf="
              spaces_list.length
            ">

            <div id="grid-view" class="tab-pane active product-grid">
              <div class="row">
                <div class="col-lg-4 col-md-6 col-12" *ngFor="let element of spaces_list"
                  [ngClass]="!_showMap ? 'col-xl-4' : 'col-xl-6'">
                  <app-list-item [spaceDetails]="element" [isMobile]="isMobile" [filters]="filter"
                    [is_similar_listing]="false" (shortlistItemEvent)="shortList($event)"
                    (mouseover)="onHoverSpace(element.id)" (mouseleave)="onLeaveSpace(element.id)">
                  </app-list-item>
                </div>
              </div>
            </div>
            <!--pagination starts-->
            <div class="post-nav nav-res pad-bot-80">
              <div class="row">
                <div class="col-md-8 offset-md-2 col-xs-12">
                  <div class="page-num text-center">
                    <ul>
                      <li *ngFor="let num of pages" [ngClass]="{ active: active_page == num }"
                        (click)="pagination(num)">
                        <a>{{ num }}</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-content" *ngIf="recommended_spaces?.length">
            <div id="grid-view" class="tab-pane active product-grid">
              <span style="display: flex; justify-content: center">
                <p style="font-size: 30px; text-align: center">
                  We are adding more spaces.
                  <a class="static-page-links" routerLink="/contact">Join our mailing list</a>
                  to get an update as we add spaces to your location.
                </p>
              </span><br />
              <div class="row">
                <div [ngClass]="!_showMap ? 'col-xl-4' : 'col-xl-6'" *ngFor="let element of recommended_spaces">
                  <app-list-item [spaceDetails]="element" [filters]="filter" [is_similar_listing]="false"
                    (shortlistItemEvent)="shortList($event)">
                  </app-list-item>
                </div>
              </div>
            </div>
          </div>

          <div class="row desktop-button-fixed-container col-lg-7 col-md-12" *ngIf="staticValue == 'Longterm'">
            <div class="col-md-7 desktop_content_btm">
              <span><app-icon name="checkTic" class="text-orange-400 w-2"></app-icon>&nbsp;Our service is
                <strong>FREE</strong></span><span><app-icon name="checkTic"
                  class="text-orange-400 w-2"></app-icon>&nbsp;We help secure the
                <strong>best deal</strong></span>
            </div>
            <div class="col-md-5 desk_btn">
              <button type="button" (click)="openInquiryPopUp()" class="large-btn"
                style="font-size: 14px;border:0;">FIND MY
                PERFECT OFFICE NOW</button>
              <!-- [routerLink]="'/contact-form/' + city_param?.replace(' ', '-')" -->
            </div>
          </div>
        </div>
      </div>
      <div class="explore__map-side goole_map_1 col-lg-4" *ngIf="_showMap || isFaqsVisible" [@inOutAnimation]>
        <div id="map_right_listing" #map_section>
          <google-map height="100%" width="100%" [zoom]="zoom" [center]="center" [options]="options">
            <map-marker #mapMarker="mapMarker" *ngFor="let marker of markersData" [position]="marker.position"
              [title]="marker.title" [options]="marker.options"
              (mapClick)="openMapInfoWindow(mapMarker, marker.info)"></map-marker>

            <map-info-window>
              <div (click)="onSpaceNameClicked(selected_marker_window)" style="cursor: pointer;" id="marker_info">
                <span class="map_wishlist"
                  [style.color]="selected_marker_window?.existingfavorite?.favourite ? '#F76900' : 'gray'"><i
                    (click)="shortList(selected_marker_window,$event)" class="ion-heart scale_2"></i></span>
                <!-- <img [src]="selected_marker_window?.map_image_url" alt="" (error)="handleImageError($event)" width="320"/> -->
                <div class="position-relative max-width" style="min-width: 100%;">
                  <ngx-slick-carousel class="carousel" #slickMainCarousel="slick-carousel" [config]="mainSliderConfig"
                    responsive="breakpoints">
                    <ng-container *ngIf="selected_marker_window?.images?.length">
                      <div *ngFor="let image of selected_marker_window?.images" ngxSlickItem
                        class="swiper-slide single-listing-slider slide" style="cursor: pointer;">
                        <img loading="eager" fetchpriority="high" [src]="image" (error)="handleImageError($event)"
                          width="479" height="320" [alt]="selected_marker_window?.name"
                          [title]="selected_marker_window?.name" />
                      </div>
                    </ng-container>
                    <ng-container *ngFor="let repeat of getArray(selected_marker_window?.images?.length)">
                      <div *ngIf="!selected_marker_window?.images?.length" ngxSlickItem
                        class="swiper-slide single-listing-slider slide" style="cursor: pointer;">
                        <img loading="eager" fetchpriority="high"
                          src="https://flexospaces-images.s3.ap-south-1.amazonaws.com/img/details_placeholder_image.webp"
                          width="479" height="320" alt="detail image" title="detail image" />
                      </div>
                    </ng-container>
                  </ngx-slick-carousel>
                  <a class="carousel-control-prev cursor-pointer" role="button" data-slide="prev"
                    (click)="prev($event)">
                    <!-- <span class="icon ion-chevron-left icon-color"></span> -->
                    <span><app-icon name="chevronLeft" class="w-3 icon-color"></app-icon></span>
                    <!-- <span class="sr-only">Previous</span> -->
                    <span class="visually-hidden d-none">Previous</span>
                  </a>
                  <a class="carousel-control-next cursor-pointer" role="button" data-slide="next"
                    (click)="next($event)">
                    <!-- <span class="icon ion-chevron-right icon-color"></span> -->
                    <span><app-icon name="chevronRight" class="w-3 icon-color"></app-icon></span>
                    <span class="visually-hidden d-none">Next</span>
                  </a>
                </div>
                <div class="info_window_content">
                  <div class="row align-items-center justify-content-between">
                    <div [ngClass]="selected_marker_window?.rating ? 'col-8 pr-0' : 'col-12'">
                      <h5 class="m-0" [ngClass]="selected_marker_window?.rating && 'text-truncate'"
                        [title]="selected_marker_window?.name">{{selected_marker_window?.name}}</h5>
                    </div>
                    <div *ngIf="selected_marker_window?.rating && selected_marker_window?.reviewCount.length > 0"
                      class="col-4 pl-0 text-right ">
                      <h5 class="m-0 text-truncate">
                        <!-- <i class="ion ion-star"></i> -->
                        <app-icon name="star" class="w-2 text-yellow-600"></app-icon>
                        {{selected_marker_window?.rating}}
                        ({{selected_marker_window?.reviewCount}})
                      </h5>
                    </div>
                  </div>
                  <div class="d-flex align-items-center mb-1" style="gap: 22px;">
                    <div *ngIf="mapType === 'coworking' || mapType === 'shortterm'">
                      <!-- <i class="fa fa-user" style="color: #f76900;"></i> -->
                      <app-icon name="user" class="w-1 text-orange-400"></app-icon>
                      &nbsp;{{selected_marker_window?.howManyPeopleInYourSpace}} people
                    </div>
                    <div class="d-flex">
                      <!-- <i class="fa-solid fa-house" style="color: #f76900;"></i>  -->
                      <app-icon name="home" class="w-2 text-orange-400"></app-icon>
                      <span class="pl-1">{{selected_marker_window?.spaceStatus}}</span>
                    </div>
                    <div class="d-flex">
                      <app-icon name="scaleRuler" class="w-3 text-orange-400"></app-icon>
                      <span class="pl-1">{{selected_marker_window?.spacesqft}} sqft</span>
                    </div>
                  </div>
                  <div class="d-flex mt-2" style="gap:30px;align-items: baseline;">
                    <div *ngIf="mapType === 'shortterm' || mapType === 'longterm'">
                      <div class="m-0 d-flex align-items-center">
                        <!-- <img src="https://flexospaces-images.s3.ap-south-1.amazonaws.com/img/rs-icon.webp"
                          class="rs_icon" alt=""> -->
                        <span class="d-flex align-items-center">
                          <app-icon name="rupee" class="w-3 text-orange-400"></app-icon>
                          <span class="price-value ">{{selected_marker_window?.originalPrice}}</span>
                        </span>
                        <span class="pt-1"> / {{mapType === 'shortterm' ? 'hour' : 'month' }}</span>
                      </div>
                    </div>
                    <div *ngIf="selected_marker_window?.isInstant && mapType === 'shortterm'">
                      <app-icon name="bolt" class="w-3 text-yellow-600"></app-icon>
                      <span class="instant_back p-1 text-dark">Instant Book</span>
                    </div>
                    <div
                      *ngIf="selected_marker_window?.spaceStatus?.toLowerCase() === 'furnished' && mapType === 'longterm'">
                      <span class="status_back p-1 text-white"> {{selected_marker_window?.spaceStatus}}</span>
                    </div>
                  </div>
                  <div *ngIf="mapType === 'coworking'">
                    <div class="m-0 d-flex align-items-center">
                      <span class="d-flex align-items-center">
                        <!-- <img src="https://flexospaces-images.s3.ap-south-1.amazonaws.com/img/rs-icon.webp"
                          class="rs_icon" alt=""> -->
                        <app-icon name="rupee" class="w-3 text-orange-400"></app-icon>
                        <span *ngIf="selected_marker_window.flexible_desk_price !== null"
                          class="price-value">{{selected_marker_window?.privatecabin_price >
                          selected_marker_window.flexible_desk_price ? selected_marker_window.flexible_desk_price:
                          selected_marker_window.privatecabin_price }}</span>
                        <span *ngIf="selected_marker_window.flexible_desk_price == null"
                          class="price-value">{{selected_marker_window?.privatecabin_price}}</span>
                      </span>
                      <small> / seat / month</small>
                    </div>
                  </div>
                </div>
              </div>
            </map-info-window>
          </google-map>
        </div>
      </div>
    </div>
  </div>
  <!-- <div *ngIf="isMobile" class="bottom-fixed-container">
    <div class="find-office-container">
      <p class="booking-text">
        <i class="ion-checkmark"></i>&nbsp;Our service is <span>FREE</span>.
      </p>
      <p class="booking-text">
        <i class="ion-checkmark"></i>&nbsp;We help you secure the
        <span>best deals</span>.
      </p>
    </div>
    <div
      class="book-btn text-center bottom-fixed-button"
      style="margin-top: 3px"
    >
      <a
        style="font-size: 14px"
        [routerLink]="'/contact-form/' + city_param?.replace(' ', '-')"
        >FIND MY PERFECT OFFICE NOW</a
      >
    </div>
  </div> -->
  <!-- <app-faqs [showMap]="_showMap" #faqsChild inViewport [spaceType]="spaceType" [cityName]="city_param"
    [location]="areaName" [inViewportOptions]="{ threshold: [0] }"
    (inViewportAction)="onIntersection($event)"></app-faqs> -->
</div>

<div class="mobile_btm_bar py-3 px-3 "
  *ngIf="['coworking space', 'managed office', 'private office', 'shared office', 'virtual office'].includes(spaceType)">
  <ul class="p-0 m-0 socail_btn_list d-flex align-items-center justify-content-between">
    <li>
      <button type="button" (click)="openInquiryPopUp()" style="color: #ffffff;" aria-label="QUOTES">
        <app-icon name="fileProtector" class="w-5"></app-icon>
        <div class="pt-2">QUOTES</div>
      </button>
    </li>
    <li>
      <a style=" color: #ffffff;"
        href="https://api.whatsapp.com/send/?phone=919136153810&text=Hi&type=phone_number&app_absent=0"
        aria-label="WHATSAPP">
        <app-icon name="whatsapp" class="w-4"></app-icon>
        <div class="pt-2">WHATSAPP</div>
      </a>
    </li>
    <li>
      <button type="button" style="color: white;" (click)="loadZohoScript2()" aria-label="CHAT">
        <app-icon name="chat" class="w-4 text-white"></app-icon>
        <div class="pt-2">CHAT</div>
      </button>
    </li>
    <li>
      <a style="color: #ffffff;" href="tel:+91 95133 92400" aria-label="CALL">
        <app-icon name="call" class="w-3"></app-icon>
        <div class="pt-2">CALL</div>
      </a>
    </li>
  </ul>
</div>